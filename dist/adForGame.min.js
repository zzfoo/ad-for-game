"use strict";var AFG={};!function(){var _,e=window.EventEmitter3,i=AFG.EVENTS={LOADED:"loaded",LOAD_ERROR:"load_error",AD_START:"ad_start",AD_SKIPPED:"ad_skipped",AD_END:"ad_end",AD_CLICKED:"ad_clicked"},t=AFG.AdSenseManager=function(){},n={_adIndex:null,_adsLoader:null,_adCache:null,_containerElement:null,disabled:!1,inited:!1,init:function(e,t){if(this.disabled)t&&t(!1);else{var n=this;this._includeJS("//imasdk.googleapis.com/js/sdkloader/ima3.js",function(){_=window.google,n._initAdLoader(e),n.inited=!0,t&&t(!0)}),window.adsbygoogle=window.adsbygoogle||[],this._adCache={},this._adIndex=0}},_initAdLoader:function(e){var t=this._createAdDisplayContainer(e),n=this._adsLoader=new _.ima.AdsLoader(t);n.addEventListener(_.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._onAdsManagerLoaded.bind(this),!1),n.addEventListener(_.ima.AdErrorEvent.Type.AD_ERROR,this._onAdsManagerLoadError.bind(this),!1)},_createAdDisplayContainer:function(e){var t=e.containerElement,n=e.containerStyle;for(var i in t?"string"==typeof t&&(t=document.getElementById(t)):t=this._createContainerElement(),n)t.style[i]=n[i];this._containerElement=t,this._displayContainerElement(!1);var a=new _.ima.AdDisplayContainer(t);return a.initialize(),a},_createContainerElement:function(){var e=document.createElement("div"),t=window.innerWidth,n=window.innerHeight,i=e.style,a={position:"absolute",top:"0px",left:"0px",backgroundColor:"black",width:t+"px",height:n+"px"};for(var d in a)i[d]=a[d];return document.body.appendChild(e),e},_displayContainerElement:function(e){this._containerElement.style.display=e?"block":"none"},createAd:function(e){if(this.disabled||!_)return!1;var t=e.name||this._generateName(),n=e.descriptionPage||window.location.href,i={ad_type:e.adType,client:e.id||this.id,description_url:n,videoad_start_delay:e.delay||0,hl:e.language||"en"};e.channel&&(i.channel=e.channel),e.adDuration&&(i.max_ad_duration=e.adDuration),e.skippableAdDuration&&(i.sdmax=e.skippableAdDuration);var a=[];for(var d in i)a.push(d+"="+encodeURIComponent(i[d]));var o="https://googleads.g.doubleclick.net/pagead/ads?"+a.join("&"),r=e.width||this.screenWidth||window.innerWidth,s=e.height||this.screenHeight||window.innerHeight;e.width=r,e.height=s;var l=new _.ima.AdsRequest;l.adTagUrl=o,l.forceNonLinearFullSlot=!0,l.linearAdSlotWidth=r,l.linearAdSlotHeight=s,l.nonLinearAdSlotWidth=r,l.nonLinearAdSlotHeight=s,(e.vastLoadTimeout||0===e.vastLoadTimeout)&&(l.vastLoadTimeout=e.vastLoadTimeout);var u=new _.ima.AdsRenderingSettings;u.restoreCustomPlaybackStateOnAdBreakComplete=!0,u.useStyledNonLinearAds=!1,u.useStyledLinearAds=!1,this._adsLoader.requestAds(l,{name:t});var h=new m;return h._init({manager:this,name:t,adOptions:e,adsRenderingSettings:u}),this._adCache[t]=h},getAd:function(e){return this._adCache[e]},showAd:function(e){var t=this.getAd(e);return!(this.disabled||!t)&&t.show()},hideAd:function(e){var t=this.getAd(e);return!(this.disabled||!t)&&(this._displayContainerElement(!1),!0)},removeAd:function(e){var t=this.getAd(e);return!!t&&(this._displayContainerElement(!1),t.destroy(),t)},_generateName:function(){return"googleAdForGame_"+ ++this._adIndex},_onAdsManagerLoaded:function(e){var t=e.getUserRequestContext().name,n=this.getAd(t);if(n){var i=e.getAdsManager({currentTime:0,duration:1},n.adsRenderingSettings),a=this;i.addEventListener(_.ima.AdEvent.Type.USER_CLOSE,function(e){a._onAdClosed(t)}),n._onAdsManagerLoaded(i)}},_onAdsManagerLoadError:function(e){var t=e.getUserRequestContext().name,n=this.getAd(t);if(n){var i=e.getError();n._onAdsManagerLoadError(i)}},_onAdClosed:function(e){this._displayContainerElement(!1)},_displayAd:function(e){this._displayContainerElement(!0)},_destroyAd:function(e){delete this._adCache[e.name]},_includeJS:function(e,t,n){var i=document.createElement("script"),a=!(i.async=!0);i.onload=function(e){a||(a=!0,t&&t(e))},i.onerror=function(e){n&&n(e)};var d=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return d.insertBefore(i,d.firstChild),i.src=e,i}};for(var a in n)t.prototype[a]=n[a];var m=AFG.AdSense=function(){e.call(this)},d={name:null,disabled:!1,_manager:null,_adsManager:null,_adOptions:null,_adsRenderingSettings:null,destroyed:null,_timeoutId:null,_init:function(e){this.destroyed=!1,this.loaded=!1,this._adsManager=null,this._manager=e.manager,this.name=e.name,this._adsRenderingSettings=e.adsRenderingSettings,this._adOptions=e.adOptions,this.autoDestroy=this._adOptions.autoDestroy;var t=this._adOptions.timeout;t&&(this._timeoutId=setTimeout(function(){this._timeoutId=null,this._onLoadTimeout()}.bind(this),t))},show:function(){if(this.disabled||this.destroyed)return!1;var e=this._adsManager;if(!e)return!1;this._manager._displayAd(this);var t=this._adOptions;return e.init(t.width,t.height,_.ima.ViewMode.NORMAL),e.start(),!0},isLoaded:function(){return!!this._adsManager},_onLoadTimeout:function(){this.emit(i.LOAD_ERROR,"load timeout!"),this.destroy()},_onAdsManagerLoaded:function(e){if(!this.destroyed){this._adsManager=e;var t=this,n=_.ima.AdEvent.Type;e.addEventListener(n.STARTED,function(){t.emit(i.AD_START)}),e.addEventListener(n.SKIPPED,function(){t.emit(i.AD_SKIPPED),t.autoDestroy&&t.destroy()}),e.addEventListener(n.USER_CLOSE,function(){t.emit(i.AD_END),t.autoDestroy&&t.destroy()}),e.addEventListener(n.CLICK,function(){t.emit(i.AD_CLICKED)}),this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null),this.emit(i.LOADED)}},_onAdsManagerLoadError:function(e){this.destroyed||(this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null),this.emit(i.LOAD_ERROR,e),this.destroy())},destroy:function(){this._manager._destroyAd(this),this._manager=null,this._adsManager&&this._adsManager.destroy(),this._adsManager=null,this._adOptions=null,this._adsRenderingSettings=null,this.name=null,this.removeAllListeners(),this.destroyed=!0}};for(var a in e.prototype)m.prototype[a]=e.prototype[a];for(var a in d)m.prototype[a]=d[a];t._reserved=["google","ima","adsbygoogle","AdsLoader","AdDisplayContainer","AdsRenderingSettings","AdsRequest","initialize","requestAds","getUserRequestContext","getAdsManager","getError","EventEmitter3","addEventListener","on","name","bind","emit","destroy","ViewMode","AdErrorEvent","AdEvent","AdEventType","AdsManagerLoadedEvent","Type","AD_ERROR","USER_CLOSE","CLICK","SKIPPED","STARTED","USER_CLOSE","ADS_MANAGER_LOADED","NORMAL"]}();