!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).AFG=t()}}(function(){return function r(a,s,d){function u(e,t){if(!s[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var i=s[e]={exports:{}};a[e][0].call(i.exports,function(t){return u(a[e][1][t]||t)},i,i.exports,r,a,s,d)}return s[e].exports}for(var l="function"==typeof require&&require,t=0;t<d.length;t++)u(d[t]);return u}({1:[function(t,e,n){var o=t("./src/Ad.js"),i=t("./src/GoogleAd.js"),r=t("./src/WechatAd.js");e.exports={EVENTS:o.EVENTS,AdManager:o.AdManager,Ad:o.Ad,GoogleAdManager:i.GoogleAdManager,GoogleAd:i.GoogleAd,WechatAdManager:r.WechatAdManager,WechatAd:r.WechatAd}},{"./src/Ad.js":3,"./src/GoogleAd.js":4,"./src/WechatAd.js":5}],2:[function(t,e,n){"use strict";var o=Object.prototype.hasOwnProperty,f="~";function i(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function r(t,e,n,o,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var r=new s(n,o||t,i),a=f?f+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],r]:t._events[a].push(r):(t._events[a]=r,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(f=!1)),a.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)o.call(t,e)&&n.push(f?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=f?f+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,r=new Array(i);o<i;o++)r[o]=n[o].fn;return r},a.prototype.listenerCount=function(t){var e=f?f+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,o,i,r){var a=f?f+t:t;if(!this._events[a])return!1;var s,d,u=this._events[a],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,o),!0;case 5:return u.fn.call(u.context,e,n,o,i),!0;case 6:return u.fn.call(u.context,e,n,o,i,r),!0}for(d=1,s=new Array(l-1);d<l;d++)s[d-1]=arguments[d];u.fn.apply(u.context,s)}else{var c,h=u.length;for(d=0;d<h;d++)switch(u[d].once&&this.removeListener(t,u[d].fn,void 0,!0),l){case 1:u[d].fn.call(u[d].context);break;case 2:u[d].fn.call(u[d].context,e);break;case 3:u[d].fn.call(u[d].context,e,n);break;case 4:u[d].fn.call(u[d].context,e,n,o);break;default:if(!s)for(c=1,s=new Array(l-1);c<l;c++)s[c-1]=arguments[c];u[d].fn.apply(u[d].context,s)}}return!0},a.prototype.on=function(t,e,n){return r(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return r(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,n,o){var i=f?f+t:t;if(!this._events[i])return this;if(!e)return u(this,i),this;var r=this._events[i];if(r.fn)r.fn!==e||o&&!r.once||n&&r.context!==n||u(this,i);else{for(var a=0,s=[],d=r.length;a<d;a++)(r[a].fn!==e||o&&!r[a].once||n&&r[a].context!==n)&&s.push(r[a]);s.length?this._events[i]=1===s.length?s[0]:s:u(this,i)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=f?f+t:t,this._events[e]&&u(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=f,a.EventEmitter=a,void 0!==e&&(e.exports=a)},{}],3:[function(t,e,n){var o=t("eventemitter3"),i={LOADED:"loaded",LOAD_ERROR:"load_error",AD_START:"ad_start",AD_SKIPPED:"ad_skipped",AD_COMPLETE:"ad_complete",AD_END:"ad_end",AD_CLICKED:"ad_clicked"},r=function(){},a={inited:null,options:null,_adIndex:null,_adCache:null,init:function(t,e){this.inited=!1,this._adCache={},this.options=t;var n=this;this.doInit(function(t){n.inited=!0,e&&e(t)})},doInit:function(t){t&&setTimeout(function(){t(null)},30)},doCreateAd:function(){return new d},createAd:function(t,e){var n=this.doCreateAd();return!!n&&(e=e||this.generateName(),n.init(e,this,t),this._adCache[e]=n)},getAd:function(t){return this._adCache[t]},destroyAd:function(t){delete this._adCache[t]},displayAd:function(t){},generateName:function(){return"ad_"+ ++this._adIndex}};for(var s in a)r.prototype[s]=a[s];var d=function(){o.call(this),this.destroyed=!1},u={name:null,manager:null,options:null,loaded:null,destroyed:null,init:function(t,e,n){this.manager=e,this.name=t,this.options=n,this.onInit()},onInit:function(){},load:function(){this.loaded=!1;var t=this;setTimeout(function(){t.loaded=!0,t.emit(i.LOADED)},30)},unload:function(){},onDestroy:function(){},refresh:function(){this.load()},show:function(){this.emit(i.AD_START);var t=this;setTimeout(function(){t.emit(i.AD_COMPLETE),t.emit(i.AD_END)},30)},destroy:function(){var t=this.manager;this.name=null,this.options=null,this.manager=null,this.unload(),this.onDestroy(),this.removeAllListeners(),t.destroyAd(this),this.destroyed=!0}};for(var s in o.prototype)d.prototype[s]=o.prototype[s];for(var s in u)d.prototype[s]=u[s];e.exports={EVENTS:i,AdManager:r,Ad:d}},{eventemitter3:2}],4:[function(t,e,n){var c,o=t("./Ad.js"),r=o.EVENTS,i=o.AdManager,a=o.Ad,s=function(){i.call(this)},d={_adsLoader:null,_containerElement:null,doInit:function(e){var t=this;window.adsbygoogle=window.adsbygoogle||[],function(t,e,n){var o=document.createElement("script");o.async=!0;var i=!1;o.onload=function(t){i||(i=!0,e&&e(t))},o.onerror=function(t){n&&n(t)};var r=document.head||document.getElementsByTagName("head")[0]||document.documentElement;r.insertBefore(o,r.firstChild),o.src=t}("//imasdk.googleapis.com/js/sdkloader/ima3.js",function(){c=window.google,t._initAdLoader(),t.inited=!0,e(null)},function(t){e(t)})},doCreateAd:function(){return new l},displayAd:function(t){this._displayContainerElement(!0)},loadAd:function(t){var e=t.options,n=e.descriptionPage||window.location.href,o={ad_type:e.adType,client:e.id,description_url:n,videoad_start_delay:e.delay||0,hl:e.language||"en"};e.channel&&(o.channel=e.channel),e.adDuration&&(o.max_ad_duration=e.adDuration),e.skippableAdDuration&&(o.sdmax=e.skippableAdDuration);var i=[];for(var r in o)i.push(r+"="+encodeURIComponent(o[r]));var a="https://googleads.g.doubleclick.net/pagead/ads?"+i.join("&"),s=e.width||window.innerWidth,d=e.height||window.innerHeight;e.width=s,e.height=d;var u=new c.ima.AdsRequest;u.adTagUrl=a,u.forceNonLinearFullSlot=!0,u.linearAdSlotWidth=s,u.linearAdSlotHeight=d,u.nonLinearAdSlotWidth=s,u.nonLinearAdSlotHeight=d,(e.vastLoadTimeout||0===e.vastLoadTimeout)&&(u.vastLoadTimeout=e.vastLoadTimeout);var l=new c.ima.AdsRenderingSettings;l.restoreCustomPlaybackStateOnAdBreakComplete=!0,l.useStyledNonLinearAds=!1,l.useStyledLinearAds=!1,this._adsLoader.requestAds(u,{name:t.name})},_initAdLoader:function(){var t=this.options,e=this._createAdDisplayContainer(t),n=this._adsLoader=new c.ima.AdsLoader(e),i=this;n.addEventListener(c.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(t){var e=t.getUserRequestContext().name,n=i.getAd(e);if(n){var o=t.getAdsManager({currentTime:0,duration:600},n.adsRenderingSettings);n._onAdsManagerLoaded(o),n.once(r.AD_END,function(){i._onAdClosed(e),n.autoDestroy&&n.destroy()})}},!1),n.addEventListener(c.ima.AdErrorEvent.Type.AD_ERROR,function(t){var e=t.getUserRequestContext().name,n=i.getAd(e);if(n){var o=t.getError();n._onAdsLoadError(o)}},!1)},_createAdDisplayContainer:function(t){var e,n;for(var o in t&&(e=t.containerElement,n=t.containerStyle),e?"string"==typeof e&&(e=document.getElementById(e)):e=this._createContainerElement(),n)e.style[o]=n[o];this._containerElement=e,this._displayContainerElement(!1);var i=new c.ima.AdDisplayContainer(e);return i.initialize(),i},_createContainerElement:function(){var t=document.createElement("div"),e=window.innerWidth,n=window.innerHeight,o=t.style,i={position:"absolute",top:"0px",left:"0px",backgroundColor:"rgba(0,0,0,0.75)",width:e+"px",height:n+"px","z-index":9e9};for(var r in i)o[r]=i[r];return document.body.appendChild(t),t},_displayContainerElement:function(t){this._containerElement.style.display=t?"block":"none"},_onAdClosed:function(t){this._displayContainerElement(!1)}};for(var u in i.prototype)s.prototype[u]=i.prototype[u];for(var u in d)s.prototype[u]=d[u];var l=function(){a.call(this)},h={_adsManager:null,adsRenderingSettings:null,_timeoutId:null,autoDestroy:null,timeout:null,onInit:function(){var t=this.options;this.adsRenderingSettings=t.adsRenderingSettings,this.autoDestroy=t.autoDestroy,this.destroyed=!1},refresh:function(){this.clearTimeout(),this.load()},clearTimeout:function(){this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},load:function(){var t=this.options;this.loaded=!1,this._adsManager=null,this.manager.loadAd(this);var e=t.timeout;e&&(this._timeoutId=setTimeout(function(){this._timeoutId=null,this._onLoadTimeout()}.bind(this),e))},show:function(){var t=this._adsManager;if(!t)return!1;this.manager.displayAd(this);var e=this.options;return t.init(e.width,e.height,c.ima.ViewMode.NORMAL),t.start(),!0},_onLoadTimeout:function(){this.emit(r.LOAD_ERROR,"load timeout!"),this.destroy()},_onAdsManagerLoaded:function(t){if(!this.destroyed){this.loaded=!0,this._adsManager=t;var e=this,n=c.ima.AdEvent.Type;this.emit(r.LOADED),t.addEventListener(n.STARTED,function(){e.emit(r.AD_START)}),t.addEventListener(n.COMPLETE,function(){e.emit(r.AD_COMPLETE),e.emit(r.AD_END)});var o=!1;t.addEventListener(n.SKIPPED,function(){o=!0,e.emit(r.AD_SKIPPED),e.emit(r.AD_END)}),t.addEventListener(n.USER_CLOSE,function(){setTimeout(function(){o||(e.emit(r.AD_COMPLETE),e.emit(r.AD_END))},100)}),t.addEventListener(n.CLICK,function(){e.emit(r.AD_CLICKED)}),this.clearTimeout()}},_onAdsLoadError:function(t){this.destroyed||(this.clearTimeout(),this.emit(r.LOAD_ERROR,t),this.destroy())},unload:function(){this._adsManager&&this._adsManager.destroy(),this._adsManager=null,this.adsRenderingSettings=null}};for(var u in a.prototype)l.prototype[u]=a.prototype[u];for(var u in h)l.prototype[u]=h[u];e.exports={GoogleAdManager:s,GoogleAd:l}},{"./Ad.js":3}],5:[function(t,e,n){var o=t("./Ad.js"),i=o.EVENTS,r=o.AdManager,a=o.Ad,s=function(){r.call(this)},d={adSingleton:null,adUnitId:null,currentAd:null,doInit:function(t){this.options;setTimeout(function(){t(null)},30)},displayAd:function(t){this.adSingleton.show()},doCreateAd:function(){return new l},_initAdSingleton:function(t){var e=this;this.adUnitId=t;var n=this.adSingleton=wx.createRewardedVideoAd({adUnitId:t});n.onLoad(function(){e.currentAd.onLoaded()}),n.onError(function(t){e.currentAd.onLoadError(t)}),n.onClose(function(t){t&&t.isEnded||void 0===t?e.currentAd.onComplete():e.currentAd.onSkipped()})},loadAd:function(t){this.currentAd=t,this.adSingleton||this._initAdSingleton(t.options.adUnitId)}};for(var u in r.prototype)s.prototype[u]=r.prototype[u];for(var u in d)s.prototype[u]=d[u];var l=function(){a.call(this)},c={_timeoutId:null,timeout:null,refresh:function(){this.clearTimeout(),this.load()},load:function(){var t=this.options;this.loaded=!1,this.manager.loadAd(this);var e=t.timeout;e&&(this._timeoutId=setTimeout(function(){this._timeoutId=null,this.onLoadTimeout()}.bind(this),e))},clearTimeout:function(){this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},unload:function(){this.loaded=!1},show:function(){return this.manager.displayAd(),!0},onLoaded:function(){this.loaded=!0,this.clearTimeout(),this.emit(i.LOADED)},onLoadError:function(t){this.clearTimeout(),this.emit(i.LOAD_ERROR,t.errMsg)},onSkipped:function(){this.emit(i.AD_SKIPPED),this.emit(i.AD_END)},onComplete:function(){this.emit(i.AD_COMPLETE),this.emit(i.AD_END)},onLoadTimeout:function(){this.emit(i.LOAD_ERROR,"load timeout!")}};for(var u in a.prototype)l.prototype[u]=a.prototype[u];for(var u in c)l.prototype[u]=c[u];e.exports={WechatAdManager:s,WechatAd:l}},{"./Ad.js":3}]},{},[1])(1)});